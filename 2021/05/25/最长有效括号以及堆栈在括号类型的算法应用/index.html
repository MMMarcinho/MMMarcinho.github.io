<!DOCTYPE HTML>
<html>

<head>
	<link rel="bookmark"  type="image/x-icon"  href="/img/logo_miccall.png"/>
	<link rel="shortcut icon" href="/img/logo_miccall.png">
	
			    <title>
    Marco's Blog
    </title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/css/mic_main.css" />
    <link rel="stylesheet" href="/css/dropdownMenu.css" />
    <meta name="keywords" content="方正 Marco" />
    
    	<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
	 
    <noscript>
        <link rel="stylesheet" href="/css/noscript.css" />
    </noscript>
    <style type="text/css">
        body:before {
          content: ' ';
          position: fixed;
          top: 0;
          background: url('/img/bg.jpg') center 0 no-repeat;
          right: 0;
          bottom: 0;
          left: 0;
          background-size: cover; 
        }
    </style>

			    
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script async type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>
    <script src="/js/main.js"></script>
	
<meta name="generator" content="Hexo 5.4.0"></head>
    
		
<!-- Layouts -->



<!--  代码渲染  -->
<link rel="stylesheet" href="/css/prism_coy.css" />
<link rel="stylesheet" href="/css/typo.css" />
<!-- 文章页 -->
<body class="is-loading">
    <!-- Wrapper 外包 s-->
    <div id="wrapper" class="fade-in">
        <!-- Intro 头部显示 s -->
        <!-- Intro 头部显示 e -->
        <!-- Header 头部logo start -->
        <header id="header">
    <a href="/" class="logo">Marco</a>
</header>
        <!-- Nav 导航条 start -->
        <nav id="nav" class="special" >
            <ul class="menu links" >
			<!-- Homepage  主页  --> 
			<li >
	            <a href="/" rel="nofollow">主页</a>
	        </li>
			<!-- categories_name  分类   --> 
	        
	        <li class="active">
	            <a href="#s1">分类</a>
	                    <ul class="submenu">
	                        <li>
	                        
	                    </ul>
	        </li>
	        
	        <!-- archives  归档   --> 
	        
	        
		        <!-- Pages 自定义   -->
		        
		        <li>
		            <a href="/about/" title="简历">
		                简历
		            </a>
		        </li>
		        
		        <li>
		            <a href="/group/" title="团队">
		                团队
		            </a>
		        </li>
		        
		        <li>
		            <a href="/gallery/" title="图库">
		                图库
		            </a>
		        </li>
		        
		        <li>
		            <a href="/tag/" title="标签">
		                标签
		            </a>
		        </li>
		        


            </ul>
            <!-- icons 图标   -->
			<ul class="icons">
                    
                    <li>
                        <a title="github" href="https://github.com/mmmarco" target="_blank" rel="noopener">
                            <i class="icon fa fa-github"></i>
                        </a>
                    </li>
                    
                    <li>
                        <a title="500px" href="https://www.zju.edu.cn" target="_blank" rel="noopener">
                            <i class="icon fa fa-500px"></i>
                        </a>
                    </li>
                    
			</ul>
</nav>

        <div id="main" >
            <div class ="post_page_title_img" style="height: 25rem;background-image: url(https://z3.ax1x.com/2021/06/10/22S1sS.jpg);background-position: center; background-repeat:no-repeat; background-size:cover;-moz-background-size:cover;overflow:hidden;" >
                <a href="#" style="padding: 4rem 4rem 2rem 4rem ;"><h2 >LeetCode - 32.最长有效括号以及堆栈在括号类型的算法应用</h2></a>
            </div>
            <!-- Post -->
            <div class="typo" style="padding: 3rem;">
                <h2 id="堆栈在括号类型的算法应用——LeetCode-32-最长有效括号"><a href="#堆栈在括号类型的算法应用——LeetCode-32-最长有效括号" class="headerlink" title="堆栈在括号类型的算法应用——LeetCode 32  最长有效括号"></a>堆栈在括号类型的算法应用——LeetCode 32  最长有效括号</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">32.</span> 最长有效括号</span><br><span class="line">    给你一个只包含 <span class="string">&#x27;(&#x27;</span> 和 <span class="string">&#x27;)&#x27;</span> 的字符串，找出最长有效（格式正确且连续）括号子串的长度。</span><br><span class="line">    示例 <span class="number">1</span>：输入：s = <span class="string">&quot;(()&quot;</span>，输出：<span class="number">2</span>，解释：最长有效括号子串是 <span class="string">&quot;()&quot;</span></span><br><span class="line">    示例 <span class="number">2</span>：输入：s = <span class="string">&quot;)()())&quot;</span>，输出：<span class="number">4</span>，解释：最长有效括号子串是 <span class="string">&quot;()()&quot;</span></span><br><span class="line">    示例 <span class="number">3</span>：输入：s = <span class="string">&quot;&quot;</span>，输出：<span class="number">0</span></span><br><span class="line">    来源：力扣（LeetCode）</span><br><span class="line">    链接：https:<span class="comment">//leetcode-cn.com/problems/longest-valid-parentheses</span></span><br><span class="line">    著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>

<p>这道题目实际上已经不是第一次见到了，从最早的学习数据结构的时候，在堆栈一章就是以括号匹配和算式匹配作为例子进行介绍。</p>
<p>一做到这道题实际上就能联想到另一道LeetCode的简单题：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">20.</span> 有效的括号</span><br><span class="line">    给定一个只包括 <span class="string">&#x27;(&#x27;</span>，<span class="string">&#x27;)&#x27;</span>，<span class="string">&#x27;&#123;&#x27;</span>，<span class="string">&#x27;&#125;&#x27;</span>，<span class="string">&#x27;[&#x27;</span>，<span class="string">&#x27;]&#x27;</span> 的字符串 s ，判断字符串是否有效。</span><br><span class="line">	有效字符串需满足：左括号必须用相同类型的右括号闭合。左括号必须以正确的顺序闭合。</span><br><span class="line"> 	示例 <span class="number">1</span>：输入：s = <span class="string">&quot;()&quot;</span>，输出：<span class="literal">true</span></span><br><span class="line">    示例 <span class="number">2</span>：输入：s = <span class="string">&quot;()[]&#123;&#125;&quot;</span>，输出：<span class="literal">true</span></span><br><span class="line">	示例 <span class="number">3</span>：输入：s = <span class="string">&quot;(]&quot;</span>，输出：<span class="literal">false</span></span><br><span class="line">	示例 <span class="number">4</span>：输入：s = <span class="string">&quot;([)]&quot;</span>，输出：<span class="literal">false</span></span><br><span class="line">	示例 <span class="number">5</span>：输入：s = <span class="string">&quot;&#123;[]&#125;&quot;</span>，输出：<span class="literal">true</span></span><br><span class="line">    来源：力扣（LeetCode）</span><br><span class="line">    链接：https:<span class="comment">//leetcode-cn.com/problems/valid-parentheses</span></span><br><span class="line">    著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>

<p>这道难度较低的题目更相似于我们在数据结构刚接触堆栈的时候能接触的简单的数据结构的题目。这道题的解法比较简单，这里略去不表。</p>
<p>为什么要用堆栈，因为这道题在后续的遍历过程中要于之前遍历的结果进行对比。这是很重要的一个原因导致堆栈的使用。当遍历时需要对前后结果进行对比时，实际上使用双指针也是一种方法，但是双指针的存在容易增加时间复杂度，而且，<strong>此处从后向前遍历只与最近的之前遍历结果相比较（因为括号需匹配最近的一个）</strong>。所以综上所述，使用一个堆栈是最佳的用于解决括号匹配的数据结构。</p>
<p>接下来回到一开始的 LeetCode 32. 最长有效括号。这道题主要并不是在判断是否存在合法的括号序列，真正重要的是找到其中的合法括号序列并求出最长的序列。基于这样的要求，实际上就会出现几个比较难避开的坑：</p>
<ol>
<li>“)()())”，较为简单的连续多个独立的有效括号</li>
<li>“)(“，全不匹配的无效括号</li>
<li>“(()))”，多重包裹的有效括号</li>
<li><strong>“()(()))”，独立括号连接多重包裹有效括号</strong></li>
</ol>
<p>以上四种情况，第四种相对而言是最容易出现的错误情况。在这种情况下，任何少考虑一个方面都会出现错误。此处就以”(())())”为例，说明时候能对最长长度进行修改，是一个很重要的结束条件。在第一次写这道题的时候，我出现了一个很简单的错误，那就是在”()”的时候就停止了向下继续并将此时的长度用于去比较最长长度。过程大概是先入栈一个”(“， 在之后向后寻找”)”，找到之后对比栈顶的符号若匹配则弹出。所以本题的关键实际上就是如何判断此时已经到达了需要把临时长度与目前最长长度进行对比的情况。</p>
<p>第一次我使用了<strong>当辅助栈为空</strong>作为条件，当栈为空就把此时的临时长度拿去与最大长度进行对比。这种情况是明显错误的，如果是”()()”的情况会直接导致临时长度在为2的情况就结束判断，所以需要将结束条件进行修改。</p>
<p>第二次我使用了<strong>有效括号之后出现不合法括号</strong>作为条件，当在有效括号之后（即堆栈空了）出现非法括号时，就结束了向下检索并将临时长度去与最长长度进行对比。但这个条件只能通过不到50%的测试样例，因为很明显把它用来检索第四个样例会出现不小的问题。因为在有效括号之后出现了”((“的情况就会被我认为是不合法的括号，所以直接暂停向下检索并将临时长度与目前最长长度进行一个对比。</p>
<p>所以，最后综合上述的情况，可以对算法进行一个最终的修改 —— <strong>始终保持栈底元素为当前已经遍历过的元素中最后一个没有被匹配的右括号的下标</strong>。也就是不向栈内送入符号而是向栈内输入下标，维护下标以获得最长长度。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">longestValidParentheses</span><span class="params">(string s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (s.<span class="built_in">size</span>() &lt; <span class="number">2</span>) <span class="comment">// 当长度小于2时实际上是肯定不会出现可以匹配的情况的</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> maxRes = <span class="number">0</span>; <span class="comment">// 用来作为目前最长长度</span></span><br><span class="line">        stack&lt;<span class="keyword">int</span>&gt; st; <span class="comment">// 用于辅助堆栈</span></span><br><span class="line">        st.<span class="built_in">push</span>(<span class="number">-1</span>); <span class="comment">// 因为一开始并没有起始的下标，所以将-1下标先送入堆栈做保留</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.<span class="built_in">size</span>(); i ++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[i] == <span class="string">&#x27;(&#x27;</span>) <span class="comment">// 当出现&#x27;(&#x27;时，可以将当前下标送入堆栈</span></span><br><span class="line">                st.<span class="built_in">push</span>(i); </span><br><span class="line">            <span class="keyword">else</span> <span class="comment">// 当出现&#x27;)&#x27;时，首先退出一个&#x27;(&#x27;的下标</span></span><br><span class="line">            &#123;</span><br><span class="line">                st.<span class="built_in">pop</span>();</span><br><span class="line">                <span class="keyword">if</span> (st.<span class="built_in">empty</span>()) <span class="comment">// 若为空则保留此时的下标</span></span><br><span class="line">                    st.<span class="built_in">push</span>(i);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    maxRes = <span class="built_in">max</span>(maxRes, i - st.<span class="built_in">top</span>()); <span class="comment">// 若不为空则对比此时最长长度</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxRes;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>当然，本道题在这里使用堆栈的方法就能正常解决了，时间复杂度为O(n)，空间复杂度为O(n)。本题在解决时其实还可以使用动态规划的方法，但是实际上在面试笔试的过程中，要能找到最佳的解决方法是很重要的，但是如果能够养成一个<strong>一看到括号就能想到使用堆栈并解决这个问题</strong>，那也是一个很好的办法。虽然可能不是最优解，但可以保证下限，能顺利解决该问题。</p>

            </div>

            <!-- Post Comments -->
            
    <!-- 使用 DISQUS_CLICK -->
<div id="disqus-comment">
    <div id="disqus_thread"></div>

<!-- add animation -->
<style>
	.disqus_click_btn {
            line-height: 30px;
            margin: 0;
            min-width: 50px;
            padding: 0 14px;
            display: inline-block;
            font-family: "Roboto", "Helvetica", "Arial", sans-serif;
            font-size: 14px;
            font-weight: 400;
            text-transform: uppercase;
            letter-spacing: 0;
            overflow: hidden;
            will-change: box-shadow;
            transition: box-shadow .2s cubic-bezier(.4, 0, 1, 1), background-color .2s cubic-bezier(.4, 0, .2, 1), color .2s cubic-bezier(.4, 0, .2, 1);
            outline: 0;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
            vertical-align: middle;
            border: 0;
            background: rgba(158, 158, 158, .2);
            box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 3px 1px -2px rgba(0, 0, 0, .2), 0 1px 5px 0 rgba(0, 0, 0, .12);
            color: #fff;
            background-color: #7EC0EE;
            text-shadow: 0
        }
</style>
	
<div class="btn_click_load" id="disqus_bt"> 
    <button class="disqus_click_btn">点击查看评论</button>
</div>

<!--
<script type="text/javascript">
$('.btn_click_load').click(function() {
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'http-miccall-tech'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    document.getElementById('disqus_bt').style.display = "none";
});
</script>
-->
<script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'http://example.com/2021/05/25/%E6%9C%80%E9%95%BF%E6%9C%89%E6%95%88%E6%8B%AC%E5%8F%B7%E4%BB%A5%E5%8F%8A%E5%A0%86%E6%A0%88%E5%9C%A8%E6%8B%AC%E5%8F%B7%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%AE%97%E6%B3%95%E5%BA%94%E7%94%A8/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'http://example.com/2021/05/25/%E6%9C%80%E9%95%BF%E6%9C%89%E6%95%88%E6%8B%AC%E5%8F%B7%E4%BB%A5%E5%8F%8A%E5%A0%86%E6%A0%88%E5%9C%A8%E6%8B%AC%E5%8F%B7%E7%B1%BB%E5%9E%8B%E7%9A%84%E7%AE%97%E6%B3%95%E5%BA%94%E7%94%A8/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>

<script type="text/javascript">
    $('.btn_click_load').click(function() {  //click to load comments
        (function() { // DON'T EDIT BELOW THIS LINE
            var d = document;
            var s = d.createElement('script');
            s.src = '//http-miccall-tech.disqus.com/embed.js';
            s.setAttribute('data-timestamp', + new Date());
            (d.head || d.body).appendChild(s);
        })();
        $('.btn_click_load').css('display','none');
    });
</script>
</div>
<style>
    #disqus-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>


        </div>
        <!-- Copyright 版权 start -->
                <div id="copyright">
            <ul>
                <li>&copy;Powered By <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/" style="border-bottom: none;">hexo</a></li>
                <li>Design: <a target="_blank" rel="noopener" href="http://miccall.tech " style="border-bottom: none;">miccall</a></li>
            </ul>
            
                <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
			
        </div>
    </div>
</body>



 	
</html>
